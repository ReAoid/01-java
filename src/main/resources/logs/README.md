# 日志文件存储

此目录用于存储应用程序的日志文件。

## 文件结构

- `app.log` - 当前应用日志（所有级别）
- `app.{date}.log` - 历史应用日志（按天滚动，保留15天）
- `error.log` - 当前错误日志（仅ERROR级别）
- `error.{date}.log` - 历史错误日志（按天滚动，保留30天）

## 日志级别使用规范

- **ERROR** - 系统错误，需要立即关注（如异常、故障）
- **WARN** - 警告信息，可能需要关注（如配置问题、资源不足）
- **INFO** - 重要业务流程信息（如用户操作、系统状态变更）
- **DEBUG** - 详细调试信息（开发时使用，生产环境关闭）

## 日志格式

```
2025-10-10 17:00:00.123 [thread-1] INFO  com.chatbot.service.ChatService - 处理用户消息
```

格式说明：
- 时间戳：yyyy-MM-dd HH:mm:ss.SSS
- 线程名：[thread-name]
- 日志级别：ERROR/WARN/INFO/DEBUG
- 类名：简化包名（最多40字符）
- 消息内容：具体日志信息

## 配置说明

日志配置在 `logback.xml` 中定义：

### 生产环境配置
- 控制台输出：仅INFO及以上级别
- 文件输出：按天滚动，保留15天，限制总大小1GB
- 错误日志：单独文件，保留30天
- 字符编码：UTF-8

### 组件日志级别
- 核心业务组件：INFO级别
- 工具类和辅助组件：WARN级别
- Spring框架：WARN级别
- 第三方库：WARN级别

### 开发调试
开发时可临时启用DEBUG级别：
```xml
<logger name="com.chatbot.service.ChatService" level="DEBUG" />
```

## 日志消息规范

1. **简洁明了**：避免冗余信息，突出关键内容
2. **结构化**：使用一致的格式，便于解析和搜索
3. **包含上下文**：记录sessionId、taskId等关键标识
4. **避免敏感信息**：不记录密码、token等敏感数据
5. **性能友好**：避免频繁的DEBUG日志影响性能
